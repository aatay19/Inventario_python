{% extends "base.html" %}
{% block title %}Inicio{% endblock %}
{% block content %}


<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        .card-dashboard {
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .card-icon {
            font-size: 40px;
            opacity: 0.3;
        }
    </style>
</head>
<body>

<div class="container mt-4">

    <h2 class="mb-4">Dashboard General</h2>

    <!-- ======= CARDS PRINCIPALES ======= -->
    <div class="row g-4">

        <!-- Total Clientes -->
        <div class="col-md-4">
            <div class="card card-dashboard p-4">
                <h5>Total de Clientes</h5>
                <h2><strong>{{ total_clientes|default:"120" }}</strong></h2>
                <span class="text-muted">Clientes registrados</span>
            </div>
        </div>

        <!-- Productos más vendidos -->
        <div class="col-md-4">
            <div class="card card-dashboard p-4">
                <h5>Producto Más Vendido</h5>
                <h3><strong>{{ producto_top|default:"Coca Cola 600ml" }}</strong></h3>
                <span class="text-muted">Basado en ventas totales</span>
            </div>
        </div>

        <!-- Valor del inventario -->
        <div class="col-md-4">
            <div class="card card-dashboard p-4">
                <h5>Valor Total del Inventario</h5>
                <h2><strong>${{ valor_inventario|default:"15,450.00" }}</strong></h2>
                <span class="text-muted">Monto estimado actual</span>
            </div>
        </div>

    </div>


    <!-- ======= GRÁFICAS ======= -->
    <div class="row mt-5">

        <!-- Gráfica de barras -->
        <div class="col-md-6 mb-4">
            <div class="card p-4 shadow-sm">
                <h5 class="text-center">Top Productos Más Vendidos</h5>
                <canvas id="graficaProductos"></canvas>
            </div>
        </div>

        <!-- Donut inventario -->
        <div class="col-md-6 mb-4">
            <div class="card p-4 shadow-sm">
                <h5 class="text-center">Distribución del Inventario</h5>
                <canvas id="graficaInventario"></canvas>
            </div>
        </div>

    </div>

</div>


<script>
    // =====================
    // GRÁFICA: Productos más vendidos
    // =====================
    const ctx1 = document.getElementById('graficaProductos');
    new Chart(ctx1, {
        type: 'bar',
        data: {
            labels: ['Coca Cola 600ml', 'Doritos', 'Gatorade', 'Leche', 'RedBull'],
            datasets: [{
                label: 'Ventas',
                data: [80, 65, 55, 48, 40],
            }]
        }
    });

    // =====================
    // GRÁFICA: Distribución del Inventario
    // =====================
    const ctx2 = document.getElementById('graficaInventario');
    new Chart(ctx2, {
        type: 'doughnut',
        data: {
            labels: ['Bebidas', 'Snacks', 'Aseo', 'Otros'],
            datasets: [{
                data: [40, 30, 20, 10],
            }]
        }
    });
</script>

</body>
</html>

{% endblock %}


